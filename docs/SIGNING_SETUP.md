# Настройка подписи для автоматических обновлений

## Генерация ключей подписи

1. Сгенерируйте пару ключей для подписи:
```bash
pnpm tauri signer generate -w ~/.tauri/snowflake.key
```

Эта команда создаст два файла:
- `~/.tauri/snowflake.key` - приватный ключ (держите в секрете!)
- `~/.tauri/snowflake.key.pub` - публичный ключ

## Настройка GitHub Secrets

1. Перейдите в настройки вашего репозитория на GitHub
2. Выберите "Secrets and variables" → "Actions"
3. Добавьте следующие секреты:

### TAURI_SIGNING_PRIVATE_KEY
- Скопируйте **полное содержимое** файла `~/.tauri/snowflake.key`
- Включите строки `-----BEGIN PRIVATE KEY-----` и `-----END PRIVATE KEY-----`

### TAURI_SIGNING_PRIVATE_KEY_PASSWORD (опционально)
- Если при генерации ключа вы установили пароль, добавьте его как отдельный секрет

## Настройка публичного ключа в Tauri

1. Скопируйте содержимое файла `~/.tauri/snowflake.key.pub`
2. Обновите `src-tauri/tauri.conf.json`:

```json
{
  "plugins": {
    "updater": {
      "active": true,
      "endpoints": [
        "https://github.com/YOUR_USERNAME/YOUR_REPO/releases/latest/download/latest.json"
      ],
      "dialog": true,
      "pubkey": "СОДЕРЖИМОЕ_ПУБЛИЧНОГО_КЛЮЧА_ЗДЕСЬ"
    }
  }
}
```

## Проверка настройки

После настройки секретов:

1. Создайте новый тег и запустите релиз
2. Проверьте, что в релизе появились `.sig` файлы для каждого ассета
3. Убедитесь, что `latest.json` содержит правильные подписи

## Важные замечания

⚠️ **Безопасность:**
- Никогда не делитесь приватным ключом
- Сохраните резервную копию ключа в безопасном месте
- Если ключ будет утерян, пользователи не смогут получать автоматические обновления

✅ **Автоматическая работа:**
- После настройки подписи будут генерироваться автоматически для каждого релиза
- Файл `latest.json` будет содержать правильные подписи для всех платформ
- Система автоматических обновлений будет работать корректно 
