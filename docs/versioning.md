# Управление версиями

В проекте настроено автоматическое управление версиями с использованием семантического версионирования (SemVer).

## Доступные команды

### Показать текущую версию
```bash
pnpm version:show
```

### Обновить версию

#### Patch версия (исправления багов)
```bash
pnpm version:patch
# 0.2.0 -> 0.2.1
```

#### Minor версия (новые функции)
```bash
pnpm version:minor
# 0.2.0 -> 0.3.0
```

#### Major версия (breaking changes)
```bash
pnpm version:major
# 0.2.0 -> 1.0.0
```

#### Prerelease версия (тестовые релизы)
```bash
pnpm version:prerelease
# 0.2.0 -> 0.2.1-0
```

### Создание тегов и релизов

#### Создать тег по текущей версии
```bash
pnpm version:tag
# Создает и отправляет тег v0.2.1 для текущей версии
```

#### Быстрый релиз (patch + тег)
```bash
pnpm version:release
# Обновляет patch версию и сразу создает тег
```

## Что происходит при обновлении версии

1. **Автоматическое обновление файлов:**
   - `package.json` - версия фронтенда
   - `src-tauri/Cargo.toml` - версия Rust бэкенда

2. **Вывод инструкций** для создания релиза

## Процесс создания релиза

### Быстрый способ (рекомендуется)
```bash
# Для patch релиза
pnpm version:release

# Для других типов релизов
pnpm version:minor && pnpm version:tag
pnpm version:major && pnpm version:tag
```

### Пошаговый способ

1. **Обновите версию:**
   ```bash
   pnpm version:patch  # или minor/major
   ```

2. **Проверьте изменения:**
   ```bash
   git diff
   ```

3. **Закоммитьте изменения:**
   ```bash
   git add .
   git commit -m "bump version to v0.2.1"
   ```

4. **Создайте и отправьте тег:**
   ```bash
   pnpm version:tag
   ```

5. **GitHub Actions автоматически:**
   - Соберет приложение для всех платформ
   - Создаст GitHub Release
   - Приложит артефакты к релизу

### Опции для создания тегов

```bash
# Создать тег с перезаписью существующего
pnpm version:tag --force

# Показать справку
node scripts/create-tag.js --help
```

## Семантическое версионирование

Следуем стандарту [SemVer](https://semver.org/lang/ru/):

- **MAJOR** (1.0.0): Несовместимые изменения API
- **MINOR** (0.1.0): Новая функциональность, совместимая с предыдущими версиями
- **PATCH** (0.0.1): Исправления багов, совместимые с предыдущими версиями

## Примеры

```bash
# Текущая версия: 0.2.0

# Исправили баг и сразу делаем релиз
pnpm version:release  # -> 0.2.1 + создание тега v0.2.1

# Добавили новую функцию
pnpm version:minor && pnpm version:tag  # -> 0.3.0 + тег v0.3.0

# Кардинально изменили архитектуру
pnpm version:major && pnpm version:tag  # -> 1.0.0 + тег v1.0.0

# Создали тестовую версию
pnpm version:prerelease && pnpm version:tag  # -> 0.2.1-0 + тег v0.2.1-0

# Просто создать тег для текущей версии (без изменения версии)
pnpm version:tag  # создает тег для текущей версии
```

## Безопасность

- Скрипт проверяет наличие незакоммиченных изменений
- Предупреждает о существующих тегах
- Поддерживает принудительную перезапись тегов с флагом `--force` 
